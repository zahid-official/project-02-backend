// Create appointment schema
model Appointment {
    id                String            @id @default(uuid())
    patientId         String
    doctorId          String
    scheduleId        String
    meetingId         String
    paymentStatus     PaymentStatus     @default(UNPAID)
    appointmentStatus AppointmentStatus @default(SCHEDULED)
    createdAt         DateTime          @default(now())
    updatedAt         DateTime          @updatedAt
    patient           Patient           @relation(fields: [patientId], references: [id])
    doctor            Doctor            @relation(fields: [doctorId], references: [id])
    schedule          Schedule          @relation(fields: [scheduleId], references: [id])
    payments          Payment?
    prescriptions     Prescription?

    @@map("appointments")
}

// Create payment schema
model Payment {
    id             String        @id @default(uuid())
    appointmentId  String        @unique
    transactionId  String        @unique
    amount         Float
    paymentStatus  PaymentStatus @default(UNPAID)
    paymentGateway Json?
    createdAt      DateTime      @default(now())
    updatedAt      DateTime      @updatedAt
    appointment    Appointment   @relation(fields: [appointmentId], references: [id])

    @@map("payments")
}

// Create prescription schema
model Prescription {
    id            String      @id @default(uuid())
    patientId     String
    doctorId      String
    appointmentId String      @unique()
    instructions  String
    followUpDate  DateTime?
    createdAt     DateTime    @default(now())
    updatedAt     DateTime    @updatedAt
    patient       Patient     @relation(fields: [patientId], references: [id])
    doctor        Doctor      @relation(fields: [doctorId], references: [id])
    appointment   Appointment @relation(fields: [appointmentId], references: [id])

    @@map("prescriptions")
}
